<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Fitness Planner</title>

    <!-- Fav Icon -->
    <link rel="icon" type="image/x-icon" href="../projectOne---bootcamp/assets/img/favicon/favicon.ico" />
    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Rokkitt:wght@800&display=swap" rel="stylesheet" />
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" />
    <!-- Compressed CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/foundation-sites@6.6.3/dist/css/foundation.min.css"
        integrity="sha256-ogmFxjqiTMnZhxCqVmcqTvjfe1Y/ec4WaRj/aQPvn+I=" crossorigin="anonymous">
    <!-- PFP CSS -->
    <link rel="stylesheet" href="../projectOne---bootcamp/assets/css/loginStyle.css">
</head>

<body>

    <!-- App Name -->
    <header>
        <h2><span>P</span>ersonal <span>F</span>itness <span>P</span>lanner</h2>
    </header>

    <!-- Landing Page -->
    <main>
        <div class="container">
            <!-- Quotes -->
            <div class="row">
                <blockquote>
                    <i class="fas fa-quote-left"></i>
                        <span id="quote"> 
                            Lorem ipsum dolor    sit amet, consectetur
                            adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. 
                        </span>
                    <i class="fas fa-quote-right"></i>
                </blockquote>
            </div>
            <!-- NewUser&Login Button -->
            <div class="row">
                <div class="signInBtn">
                    <button class="button warning" type="button" data-open="newUserModal">New User</button>
                    <button class="button secondary" type="button" data-open="signInModal">LOGIN</button>
                </div>
            </div>
        </div>
    </main>


    <!-- New User Modal -->
    <div class="tiny reveal" id="newUserModal" data-animation-in="fade-in" data-reveal>
        <!-- Modal title -->
        <h3>Account Creation</h3>

        <!-- Username -->
        <div><i class="fas fa-user modalIcon"></i>
            <input id="modalUsername" class="modalInput" type="text" placeholder="Username" required="">
            <br>
            <span id="usernameError"></span>
        </div>
        <!-- Password -->
        <div><i class="fas fa-unlock modalIcon"></i>
            <input id="modalPass" class="modalInput modalPass" type="text" placeholder="Password" data-tooltip class="top" tabindex="2"
                title="Your password must have at least 8 characters" required="">
                <br>
            <span id="passwordError"></span>
        </div>
        <!-- Confirm Password -->
        <div><i class="fas fa-unlock modalIcon"></i>
            <input id="modalConfirmPass" class="modalInput" type="text" placeholder="Confirm Password" required="">
            <br>
            <span id="confirmPasswordError"></span>
        </div>

        <!-- Login Button -->
        <button id="modalBtnNew" class="button secondary" type="button" data-open="login">LOGIN</button>
        <br>
        <span id="newLoginError"></span>
        <!-- Close by "x" -->
        <button class="close-button" data-close aria-label="Close Accessible Modal" type="button">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>

    <!-- Login Modal -->
    <div class="tiny reveal" id="signInModal" data-animation-in="fade-in" data-reveal>
        <!-- Modal title -->
        <h3>Sign In</h3>

        <!-- Username -->
        <div><i class="fas fa-user modalIcon"></i>
            <input class="modalInput" type="text" placeholder="Username">
        </div>
        <!-- Password -->
        <div><i class="fas fa-unlock modalIcon"></i>
            <input id="viewPassword" class="modalInput modalPass" type="password" placeholder="Password">
        </div>

        <!-- Checkbox Show Password -->
        <div class="checkboxModal">
            <input id="checkPass" type="checkbox"><label id="checkboxModal">Show Password</label>
        </div>

        <!-- Login Button -->
        <button id="modalBtnCurrent" class="button secondary modalBtn" type="button" data-open="login">LOGIN</button>
        <br>
        <span id="currentLoginError"></span>
        <!-- Close by "x" -->
        <button class="close-button" data-close aria-label="Close Accessible Modal" type="button">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>

    <!-- jquery  script link -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <!-- Compressed JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/foundation-sites@6.6.3/dist/js/foundation.min.js"
        integrity="sha256-pRF3zifJRA9jXGv++b06qwtSqX1byFQOLjqa2PTEb2o=" crossorigin="anonymous"></script>

    <script>
        //Foundation FrameWork to activate modal
        $(document).foundation();

        //Variables for Show Password
        var $viewPassword = $("#viewPassword");
        var $checkPass = $("#checkPass");
        var viewLoginPwd = false;
        
        //When checkbox is clicked
        $checkPass.on("click", function() {

            if (viewLoginPwd === false) {

                $viewPassword.attr("type", "text");
                
                viewLoginPwd = true;

            } else if (viewLoginPwd === true) {

                $viewPassword.attr("type", "password");

                viewLoginPwd = false;
            }
        });

        //jquery Current User Input Variables
        var $loginBtnCurrent = $("#modalBtnCurrent");
        var modalCurrentUser = $(".modalInput").eq(3);
        var modalCurrentPass = $(".modalInput").eq(4);

        //Current User Login Button
        $loginBtnCurrent.on("click", function(){
        
        //Username and Password Input Values 
        var currentUsername = modalCurrentUser.val();
        var currentPassword = modalCurrentPass.val();

        //Get local Storage Values
        var localUsername = localStorage.getItem("Username");
        var localPassword = localStorage.getItem("Password");
        
        if (currentUsername === localUsername && currentPassword === localPassword) {
            $currentLoginError.hide();
            window.location.replace("PersonalSetting.html");

        } else if (localPassword === null && localUsername === null) {

            $currentLoginError.html("You Do Not Have an Account");
            $currentLoginError.show();

        } else {

            $currentLoginError.html("Incorrect Details");
            $currentLoginError.show();
        }

        });

       
        //jquery New User Input Variables
        var $loginBtnNew = $("#modalBtnNew");
        var $modalPass = $(".modalPass");
        var $modalInput = $(".modalInput");


        //New User Login button
        $loginBtnNew.on("click", function(){

            usernameError = false;
            passwordError = false;
            confirmPasswordError = false;

            checkUsername();
            checkPassword();
            checkConfirmPassword();

            if (usernameError === false && passwordError === false && confirmPasswordError === false) {
                //Store Username and Password
                localStorage.setItem("Username", $modalUsername.val().trim());
                localStorage.setItem("Password", $modalPass.val().trim());
                $newLoginError.hide();
                window.location.replace("PersonalSetting.html");

                return true;
            } else {
                $newLoginError.html("All Fields Must Be Entered Correctly");
                $newLoginError.show();
                return false;
            }

        });

        //jquery validation variables
        var $modalUsername = $("#modalUsername");
        var $usernameError = $("#usernameError");
        var $modalPass = $("#modalPass");
        var $passwordError = $("#passwordError");
        var $modalConfirmPass = $("#modalConfirmPass");
        var $confirmPasswordError = $("#confirmPasswordError");
        var $newLoginError = $("#newLoginError");
        var $currentLoginError = $("#currentLoginError");
        //Boolean validation variable
        var usernameError = false;
        var passwordError = false;
        var confirmPasswordError = false;

        //Hide Error Messages
        $usernameError.hide();
        $passwordError.hide();
        $confirmPasswordError.hide();
        $newLoginError.hide();
        $currentLoginError.hide();


        //Function to check Username
        function checkUsername() {
            var pattern = /^[a-zA-Z]*$/;
            var username = $modalUsername.val();
            if (pattern.test(username) && username !== '') {
               $usernameError.hide();
               $modalUsername.css("border-bottom","2px solid #34F458");
            } else {
               $usernameError.html("Should contain only letters");
               $usernameError.show();
               $modalUsername.css("border-bottom","2px solid #F90A0A");
               usernameError = true;
            }
         }

         //Function to check Password length 
         function checkPassword() {
            var passwordLength = $modalPass.val().length;
            if (passwordLength < 8) {
               $passwordError.html("Must be at least 8 Characters");
               $passwordError.show();
               $modalPass.css("border-bottom","2px solid #F90A0A");
               passwordError = true;
            } else {
               $passwordError.hide();
               $modalPass.css("border-bottom","2px solid #34F458");
            }
         }

         //Function to check Password Match
         function checkConfirmPassword() {
            var password = $modalPass.val();
            var confirmPassword = $modalConfirmPass.val();
            if (password !== confirmPassword) {
               $confirmPasswordError.html("Passwords Did not Matched");
               $confirmPasswordError.show();
               $modalConfirmPass.css("border-bottom","2px solid #F90A0A");
               confirmPasswordError = true;
            } else {
               $confirmPasswordError.hide();
               $modalConfirmPass.css("border-bottom","2px solid #34F458");
            }
         }
        
        //When user clicks away from input field run check function (Only for NewUser Login Modal)
        $modalUsername.focusout(function(){
            checkUsername();
         });
         $modalPass.focusout(function() {
            checkPassword();
         });
         $modalConfirmPass.focusout(function() {
            checkConfirmPassword();
         });

    </script>

</body>

</html>